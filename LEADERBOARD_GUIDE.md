# ğŸ† Leaderboard System - Complete Guide

## æ¦‚è¿°

æ’è¡Œæ¦œç³»ç»Ÿå·²å®Œå…¨å®ç°ï¼ŒåŒ…å«ç§¯åˆ†è®¡ç®—ã€æ’åã€æˆå°±ç³»ç»Ÿç­‰åŠŸèƒ½ã€‚

## åŠŸèƒ½ç‰¹æ€§

### 1. ç§¯åˆ†ç³»ç»Ÿ (Points System)

#### ç§¯åˆ†è§„åˆ™
| æ´»åŠ¨ç±»å‹ | åŸºç¡€ç§¯åˆ† | è¯´æ˜ |
|---------|---------|------|
| ğŸ“Š Poll Response | 10 åˆ† | å®ŒæˆæŠ•ç¥¨æ´»åŠ¨ |
| âœï¸ Short Answer | 20 åˆ† | æäº¤ç®€ç­”é¢˜ |
| â˜ï¸ Word Cloud | 15 åˆ† | å‚ä¸è¯äº‘æ´»åŠ¨ |
| âœ… Correct Answer | +30 åˆ† | æŠ•ç¥¨ç­”å¯¹ï¼ˆè‡ªåŠ¨è¯„åˆ†ï¼‰ |
| âš¡ Early Submission | +5 åˆ† | å‰5åæäº¤è€…å¥–åŠ± |
| ğŸ’¬ Feedback Received | +5 åˆ† | æ”¶åˆ°è€å¸ˆåé¦ˆ |

#### ç§¯åˆ†è®¡ç®—
- è‡ªåŠ¨ç»Ÿè®¡å­¦ç”Ÿåœ¨æ‰€æœ‰æ´»åŠ¨ä¸­çš„è¡¨ç°
- å®æ—¶è®¡ç®—æ€»ç§¯åˆ†å’Œåˆ†ç±»ç§¯åˆ†
- æ”¯æŒæŒ‰è¯¾ç¨‹å’Œå…¨å±€ç»Ÿè®¡

### 2. æ’è¡Œæ¦œåŠŸèƒ½

#### è¯¾ç¨‹æ’è¡Œæ¦œ (Course Rankings)
- æ˜¾ç¤ºæ¯ä¸ªè¯¾ç¨‹çš„å‰10åå­¦ç”Ÿ
- å±•ç¤ºå­¦ç”Ÿå½“å‰æ’åå’Œç§¯åˆ†
- é«˜äº®æ˜¾ç¤ºå½“å‰å­¦ç”Ÿä½ç½®
- æ˜¾ç¤ºæ’åç™¾åˆ†ä½ï¼ˆTop X%ï¼‰

#### å…¨å±€æ’è¡Œæ¦œ (Global Leaderboard)
- è·¨æ‰€æœ‰è¯¾ç¨‹çš„å‰50åå­¦ç”Ÿ
- æ˜¾ç¤ºå­¦ç”Ÿæ‰€å±è¯¾ç¨‹
- å®Œæ•´çš„æ’åå’Œç§¯åˆ†ä¿¡æ¯

#### æ’åå¾½ç« 
- ğŸ¥‡ ç¬¬1åï¼šé‡‘ç‰Œå¾½ç« 
- ğŸ¥ˆ ç¬¬2åï¼šé“¶ç‰Œå¾½ç« 
- ğŸ¥‰ ç¬¬3åï¼šé“œç‰Œå¾½ç« 
- ç¬¬4+åï¼šç°è‰²æ•°å­—å¾½ç« 

### 3. æˆå°±ç³»ç»Ÿ (Achievements)

#### æ´»åŠ¨é‡Œç¨‹ç¢‘
| æˆå°± | è¦æ±‚ | è¯´æ˜ |
|------|------|------|
| ğŸ¯ First Step | å®Œæˆ1ä¸ªæ´»åŠ¨ | é¦–æ¬¡å‚ä¸ |
| ğŸ”¥ Active Learner | å®Œæˆ5ä¸ªæ´»åŠ¨ | æ´»è·ƒå­¦ä¹ è€… |
| â­ Dedicated Student | å®Œæˆ10ä¸ªæ´»åŠ¨ | ä¸“æ³¨å­¦ç”Ÿ |
| ğŸ’ Master Learner | å®Œæˆ25ä¸ªæ´»åŠ¨ | å­¦ä¹ å¤§å¸ˆ |

#### ç§¯åˆ†é‡Œç¨‹ç¢‘
| æˆå°± | è¦æ±‚ | è¯´æ˜ |
|------|------|------|
| ğŸ’¯ Century Club | è·å¾—100åˆ† | ç™¾åˆ†ä¿±ä¹éƒ¨ |
| ğŸ… Point Champion | è·å¾—500åˆ† | ç§¯åˆ†å† å†› |
| ğŸ‘‘ Point Legend | è·å¾—1000åˆ† | ç§¯åˆ†ä¼ å¥‡ |

#### ç‰¹æ®Šæˆå°±
| æˆå°± | è¦æ±‚ | è¯´æ˜ |
|------|------|------|
| ğŸ“ Quiz Master | 5ä¸ªä»¥ä¸Šæ­£ç¡®ç­”æ¡ˆ | æµ‹éªŒå¤§å¸ˆ |
| âš¡ Early Bird | 5æ¬¡ä»¥ä¸Šæ—©é¸Ÿæäº¤ | æ—©èµ·çš„é¸Ÿå„¿ |

### 4. ç”¨æˆ·ç•Œé¢

#### é¡¶éƒ¨ç»Ÿè®¡å¡ç‰‡
- **Total Points**: æ€»ç§¯åˆ†
- **Achievements**: æˆå°±æ•°é‡
- **Global Rank**: å…¨å±€æ’å
- **Courses Enrolled**: å·²æ³¨å†Œè¯¾ç¨‹æ•°

#### ä¸‰ä¸ªä¸»è¦æ ‡ç­¾é¡µ

**ğŸ“š Course Rankings**
- æ¯ä¸ªå·²æ³¨å†Œè¯¾ç¨‹çš„å•ç‹¬æ’è¡Œæ¦œ
- æ˜¾ç¤º"æˆ‘çš„æ’å"å¡ç‰‡
- é«˜äº®å½“å‰å­¦ç”Ÿæ‰€åœ¨è¡Œ

**ğŸŒ Global Leaderboard**
- å…¨å±€å‰50åå­¦ç”Ÿ
- æ˜¾ç¤ºè¯¾ç¨‹å½’å±
- å®Œæ•´æ’åä¿¡æ¯

**ğŸ“Š My Stats**
- è¯¦ç»†çš„ç§¯åˆ†åˆ†ç±»æ˜ç»†
- "å¦‚ä½•è·å¾—æ›´å¤šç§¯åˆ†"æŒ‡å—
- å„è¯¾ç¨‹æ’åæ±‡æ€»

## æŠ€æœ¯å®ç°

### æ–°å¢æ–‡ä»¶

#### 1. `services/points_service.py`
ç§¯åˆ†æœåŠ¡æ ¸å¿ƒæ¨¡å—ï¼š

```python
class PointsService:
    # ç§¯åˆ†å€¼å®šä¹‰
    POINTS = {
        'poll_response': 10,
        'short_answer_response': 20,
        'word_cloud_response': 15,
        'poll_correct': 30,
        'early_submission': 5,
        'feedback_received': 5,
    }
    
    # æ ¸å¿ƒæ–¹æ³•
    @staticmethod
    def calculate_student_points(student_identifier, course_id=None)
    
    @staticmethod
    def get_course_leaderboard(course_id, limit=50)
    
    @staticmethod
    def get_global_leaderboard(limit=100)
    
    @staticmethod
    def get_student_rank(student_identifier, course_id)
    
    @staticmethod
    def get_achievements(student_identifier, course_id=None)
```

#### 2. `templates/student/leaderboard.html`
å®Œæ•´çš„æ’è¡Œæ¦œUIï¼š
- å“åº”å¼è®¾è®¡
- æ¸å˜è‰²å½©ä¸»é¢˜
- äº¤äº’å¼æ ‡ç­¾é¡µ
- æˆå°±å¡ç‰‡å±•ç¤º
- æ’åè¡¨æ ¼

### æ›´æ–°æ–‡ä»¶

#### `routes/student_routes.py`
æ›´æ–°äº† `/student/leaderboard` è·¯ç”±ï¼š

```python
@student_bp.route('/leaderboard')
@student_required
def leaderboard():
    # è·å–å­¦ç”Ÿä¿¡æ¯
    # è®¡ç®—è¯¾ç¨‹æ’è¡Œæ¦œ
    # è®¡ç®—å…¨å±€æ’è¡Œæ¦œ
    # è·å–ä¸ªäººç§¯åˆ†å’Œæˆå°±
    # æ¸²æŸ“æ¨¡æ¿
```

## ä½¿ç”¨æŒ‡å—

### å­¦ç”Ÿç«¯

1. **è®¿é—®æ’è¡Œæ¦œ**
   - ç‚¹å‡»å¯¼èˆªæ  "ğŸ† Leaderboard"
   - æˆ–ä» Dashboard å¿«æ·å…¥å£è®¿é—®

2. **æŸ¥çœ‹æ’å**
   - é»˜è®¤æ˜¾ç¤º"è¯¾ç¨‹æ’å"æ ‡ç­¾é¡µ
   - æŸ¥çœ‹å„è¯¾ç¨‹çš„æ’è¡Œæ¦œ
   - å½“å‰å­¦ç”Ÿè¡Œä¼šé«˜äº®æ˜¾ç¤º

3. **æŸ¥çœ‹å…¨å±€æ’å**
   - ç‚¹å‡»"ğŸŒ Global Leaderboard"æ ‡ç­¾
   - æŸ¥çœ‹è·¨æ‰€æœ‰è¯¾ç¨‹çš„æ’å

4. **æŸ¥çœ‹ä¸ªäººç»Ÿè®¡**
   - ç‚¹å‡»"ğŸ“Š My Stats"æ ‡ç­¾
   - æŸ¥çœ‹ç§¯åˆ†æ˜ç»†
   - äº†è§£å¦‚ä½•è·å¾—æ›´å¤šç§¯åˆ†

5. **æ”¶é›†æˆå°±**
   - å®Œæˆæ´»åŠ¨è‡ªåŠ¨è§£é”æˆå°±
   - æˆå°±å¡ç‰‡æ˜¾ç¤ºåœ¨é¡µé¢é¡¶éƒ¨
   - åŒ…å«æˆå°±å›¾æ ‡ã€åç§°å’Œæè¿°

### æ•™å¸ˆç«¯

æ•™å¸ˆå¯ä»¥çœ‹åˆ°æ’è¡Œæ¦œæ¿€åŠ±å­¦ç”Ÿï¼š
- å­¦ç”Ÿä¼šä¸ºäº†æé«˜æ’åè€Œæ›´ç§¯æå‚ä¸
- æ—©é¸Ÿå¥–åŠ±é¼“åŠ±åŠæ—¶æäº¤
- æ­£ç¡®ç­”æ¡ˆå¥–åŠ±é¼“åŠ±è®¤çœŸæ€è€ƒ

## æ•°æ®æµç¨‹

### ç§¯åˆ†è®¡ç®—æµç¨‹
```
1. å­¦ç”Ÿæäº¤æ´»åŠ¨å“åº”
   â†“
2. ä¿å­˜åˆ° activities.responses æ•°ç»„
   â†“
3. PointsService æ‰«ææ‰€æœ‰ activities
   â†“
4. è¯†åˆ«å­¦ç”Ÿçš„æ‰€æœ‰å“åº”
   â†“
5. æ ¹æ®æ´»åŠ¨ç±»å‹å’Œç‰¹æ®Šæƒ…å†µè®¡ç®—ç§¯åˆ†
   â†“
6. è¿”å›ç§¯åˆ†æ˜ç»†å’Œæ€»åˆ†
```

### æ’åè®¡ç®—æµç¨‹
```
1. è·å–è¯¾ç¨‹/å…¨å±€æ‰€æœ‰å­¦ç”Ÿ
   â†“
2. ä¸ºæ¯ä¸ªå­¦ç”Ÿè®¡ç®—æ€»ç§¯åˆ†
   â†“
3. æŒ‰ç§¯åˆ†é™åºæ’åº
   â†“
4. åˆ†é…æ’åï¼ˆ1, 2, 3...ï¼‰
   â†“
5. è®¡ç®—ç™¾åˆ†ä½
   â†“
6. è¿”å›æ’è¡Œæ¦œæ•°æ®
```

### æˆå°±è§£é”æµç¨‹
```
1. è®¡ç®—å­¦ç”Ÿç§¯åˆ†å’Œæ´»åŠ¨æ•°
   â†“
2. æ£€æŸ¥å„é¡¹æˆå°±æ¡ä»¶
   â†“
3. ç¬¦åˆæ¡ä»¶çš„æˆå°±åŠ å…¥åˆ—è¡¨
   â†“
4. è¿”å›å·²è§£é”æˆå°±æ•°ç»„
```

## æ€§èƒ½ä¼˜åŒ–å»ºè®®

### å½“å‰å®ç°
- å®æ—¶è®¡ç®—æ‰€æœ‰ç§¯åˆ†å’Œæ’å
- é€‚åˆä¸­å°è§„æ¨¡ï¼ˆ<1000å­¦ç”Ÿï¼‰

### æœªæ¥ä¼˜åŒ–ï¼ˆå¦‚éœ€è¦ï¼‰
1. **ç¼“å­˜æ’è¡Œæ¦œ**
   - å®šæ—¶æ›´æ–°ï¼ˆå¦‚æ¯å°æ—¶ï¼‰
   - å­˜å‚¨åœ¨æ•°æ®åº“æˆ–Redis

2. **å¢é‡æ›´æ–°**
   - æ´»åŠ¨å“åº”æ—¶è§¦å‘ç§¯åˆ†æ›´æ–°
   - åªè®¡ç®—å˜åŒ–çš„éƒ¨åˆ†

3. **åˆ†é¡µåŠ è½½**
   - å¤§å‹æ’è¡Œæ¦œåˆ†é¡µæ˜¾ç¤º
   - å‡å°‘å•æ¬¡æŸ¥è¯¢æ•°æ®é‡

## æ‰©å±•åŠŸèƒ½å»ºè®®

### å¯èƒ½çš„æœªæ¥å¢å¼º
1. **å‘¨/æœˆæ’è¡Œæ¦œ**
   - æŒ‰æ—¶é—´æ®µç­›é€‰
   - æ˜¾ç¤ºè¶‹åŠ¿å›¾è¡¨

2. **å›¢é˜Ÿæ’è¡Œæ¦œ**
   - å°ç»„åä½œç§¯åˆ†
   - å›¢é˜Ÿæ’åç«äº‰

3. **è‡ªå®šä¹‰æˆå°±**
   - æ•™å¸ˆåˆ›å»ºç‰¹æ®Šæˆå°±
   - æ‰‹åŠ¨æˆäºˆå¾½ç« 

4. **ç§¯åˆ†å•†åŸ**
   - ç”¨ç§¯åˆ†å…‘æ¢è™šæ‹Ÿå¥–åŠ±
   - å¢åŠ æ¸¸æˆåŒ–å…ƒç´ 

5. **ç§¯åˆ†å†å²**
   - æŸ¥çœ‹ç§¯åˆ†å˜åŒ–æ›²çº¿
   - æ´»åŠ¨è´¡çŒ®æ˜ç»†

## æµ‹è¯•æ£€æŸ¥æ¸…å•

### åŠŸèƒ½æµ‹è¯•
- [ ] è®¿é—®æ’è¡Œæ¦œé¡µé¢æ­£å¸¸åŠ è½½
- [ ] è¯¾ç¨‹æ’è¡Œæ¦œæ˜¾ç¤ºæ­£ç¡®
- [ ] å…¨å±€æ’è¡Œæ¦œæ˜¾ç¤ºæ­£ç¡®
- [ ] ä¸ªäººç»Ÿè®¡æ•°æ®å‡†ç¡®
- [ ] æˆå°±æ­£ç¡®è§£é”æ˜¾ç¤º
- [ ] æ’åå¾½ç« æ˜¾ç¤ºæ­£ç¡®
- [ ] å½“å‰å­¦ç”Ÿé«˜äº®æ˜¾ç¤º
- [ ] æ ‡ç­¾é¡µåˆ‡æ¢æ­£å¸¸

### æ•°æ®æµ‹è¯•
- [ ] ç§¯åˆ†è®¡ç®—å‡†ç¡®
- [ ] æ’åé¡ºåºæ­£ç¡®
- [ ] ç™¾åˆ†ä½è®¡ç®—å‡†ç¡®
- [ ] æ´»åŠ¨è®¡æ•°æ­£ç¡®
- [ ] æˆå°±æ¡ä»¶åˆ¤æ–­å‡†ç¡®

### UIæµ‹è¯•
- [ ] å“åº”å¼å¸ƒå±€æ­£å¸¸
- [ ] é¢œè‰²æ¸å˜æ˜¾ç¤ºç¾è§‚
- [ ] å¾½ç« æ ·å¼æ­£ç¡®
- [ ] è¡¨æ ¼æ ·å¼ç»Ÿä¸€
- [ ] ç©ºçŠ¶æ€æç¤ºå‹å¥½

## æ•…éšœæ’é™¤

### é—®é¢˜: æ’è¡Œæ¦œæ˜¾ç¤ºç©ºç™½
**è§£å†³**: æ£€æŸ¥å­¦ç”Ÿæ˜¯å¦å·²æ³¨å†Œè¯¾ç¨‹å¹¶å‚ä¸æ´»åŠ¨

### é—®é¢˜: ç§¯åˆ†è®¡ç®—ä¸å‡†ç¡®
**è§£å†³**: æ£€æŸ¥ activities.responses æ•°æ®æ ¼å¼æ˜¯å¦æ­£ç¡®

### é—®é¢˜: æ’åæœªæ›´æ–°
**è§£å†³**: åˆ·æ–°é¡µé¢ï¼Œç³»ç»Ÿå®æ—¶è®¡ç®—æ’å

### é—®é¢˜: æˆå°±æœªè§£é”
**è§£å†³**: ç¡®è®¤å·²æ»¡è¶³æˆå°±æ¡ä»¶ï¼Œæ£€æŸ¥ points_service.py é€»è¾‘

## æ€»ç»“

æ’è¡Œæ¦œç³»ç»Ÿç°å·²å®Œå…¨å®ç°ï¼ŒåŒ…å«ï¼š
âœ… å®Œæ•´çš„ç§¯åˆ†è®¡ç®—ç³»ç»Ÿ
âœ… å¤šç»´åº¦æ’è¡Œæ¦œï¼ˆè¯¾ç¨‹/å…¨å±€ï¼‰
âœ… ä¸°å¯Œçš„æˆå°±ç³»ç»Ÿ
âœ… ç²¾ç¾çš„UIè®¾è®¡
âœ… å®æ—¶æ•°æ®æ›´æ–°

å­¦ç”Ÿå¯ä»¥é€šè¿‡ç§¯æå‚ä¸æ´»åŠ¨ã€åŠæ—¶æäº¤ã€è®¤çœŸç­”é¢˜æ¥æé«˜æ’åï¼Œç³»ç»Ÿå°†æœ‰æ•ˆæ¿€åŠ±å­¦ç”Ÿçš„å­¦ä¹ ç§¯ææ€§ï¼ğŸ‰
